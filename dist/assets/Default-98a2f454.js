import{g as x,m as K,u as V,c as t,a as b,V as Q,p as B,I as W,b as I,d as Z,e as ee,f as X,h as te,i as ae,j as se,t as z,k as oe,l as ne,n as ie,o as le,q as re,r as ce,M as ue,w as de,v as fe,s as h,_ as D,x as ge,y as me,z as he,A as _e,B as ve,C as J,D as pe,E as l,F as u,G as s,H as ye,J as S,K as _,L as ke,N as we,O as f,P as be,Q as Ne,R as N,S as Y,T as w,U as C,W as R,X as Te,Y as g,Z as Se,$ as xe,a0 as m,a1 as Ve,a2 as O,a3 as Ce,a4 as Re,a5 as Le,a6 as p,a7 as Be,a8 as Ie,a9 as A,aa as De,ab as Ae,ac as k,ad as Pe,ae as Me,af as je,ag as $e,ah as Ee,ai as ze,aj as Je,ak as U,al as Oe}from"./index-652329c0.js";const Ue=x()({name:"VAppBarTitle",props:K(),setup(e,i){let{slots:n}=i;return V(()=>t(Q,b(e,{class:"v-app-bar-title"}),n)),{}}});const Fe=B({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:W,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...I(),...Z({location:"top end"}),...ee(),...X(),...te(),...ae({transition:"scale-rotate-transition"})},"VBadge"),L=x()({name:"VBadge",inheritAttrs:!1,props:Fe(),setup(e,i){const{backgroundColorClasses:n,backgroundColorStyles:c}=se(z(e,"color")),{roundedClasses:o}=oe(e),{t:r}=ne(),{textColorClasses:a,textColorStyles:y}=ie(z(e,"textColor")),{themeClasses:d}=le(),{locationStyles:T}=re(e,!0,v=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(v)?+(e.offsetY??0):["left","right"].includes(v)?+(e.offsetX??0):0));return V(()=>{const v=Number(e.content),P=!e.max||isNaN(v)?e.content:v<=+e.max?v:`${e.max}+`,[q,H]=ce(i.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return t(e.tag,b({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},H,{style:e.style}),{default:()=>{var M,j;return[t("div",{class:"v-badge__wrapper"},[(j=(M=i.slots).default)==null?void 0:j.call(M),t(ue,{transition:e.transition},{default:()=>{var $,E;return[de(t("span",b({class:["v-badge__badge",d.value,n.value,o.value,a.value],style:[c.value,y.value,e.inline?{}:T.value],"aria-atomic":"true","aria-label":r(e.label,v),"aria-live":"polite",role:"status"},q),[e.dot?void 0:i.slots.badge?(E=($=i.slots).badge)==null?void 0:E.call($):e.icon?t(h,{icon:e.icon},null):P]),[[fe,e.modelValue]])]}})])]}})}),{}}}),Xe={props:["useToggle"],setup(){const e=ge([]);me();const i=he(),n=async()=>{try{const c=await J.getUnreadNotifications();e.value=c.data}catch(c){console.error("Failed to fetch notifications:",c)}};return _e(()=>{n()}),ve(()=>i.fullPath,async()=>{await n()}),{notifications:e,getUnreadNotifications:n}},methods:{toggleDrawer(){this.$emit("toggleDrawer")},goToNotificationList(){this.$router.push("/backoffice/notification")},async markAllNotificationsAsRead(){try{await J.markAllNotificationsAsRead(),await this.getUnreadNotifications()}catch(e){this.$root.showSnackbar(e.message)}},async logout(){try{await pe.logout(),this.$router.push("/login")}catch(e){this.$root.showSnackbar(e.message)}},goToDetailNotification(e){this.$router.push(`/backoffice/notification/${e.ID}`)}}},Ye={key:1,style:{width:"40px"},class:"ml-4"},Ge=m("div",{class:"d-flex justify-end"},null,-1),qe={key:0,class:"d-flex justify-end"},He={key:1},Ke=m("p",{class:"font-12 text-primary text-center"},"Tidak Ada Notifikasi Baru",-1),Qe=[Ke],We={class:"d-flex justify-center"},Ze=m("p",{class:"text-center text-primary"},"Tampilkan Semua",-1);function et(e,i,n,c,o,r){return l(),u(Ve,{style:{position:"fixed"}},{default:s(()=>[n.useToggle?(l(),u(ye,{key:0,onClick:r.toggleDrawer},null,8,["onClick"])):S("",!0),n.useToggle?S("",!0):(l(),_("div",Ye,[t(ke,{height:"40",src:we})])),n.useToggle?S("",!0):(l(),u(Ue,{key:2,class:"font-bold"},{default:s(()=>[f(" Baraka Education ")]),_:1})),t(be),t(Ne,{location:"bottom end"},{activator:s(({props:a})=>[c.notifications.length>0?(l(),u(L,{key:0,color:"#d82c2c","offset-x":"10","offset-y":"8",content:c.notifications.length},{default:s(()=>[t(N,b({icon:""},a),{default:s(()=>[t(h,null,{default:s(()=>[f("mdi-bell")]),_:1})]),_:2},1040)]),_:2},1032,["content"])):(l(),u(N,b({key:1,icon:""},a),{default:s(()=>[t(h,null,{default:s(()=>[f("mdi-bell")]),_:1})]),_:2},1040))]),default:s(()=>[Ge,t(Y,{lines:"3",width:"300"},{default:s(()=>[t(w,null,{default:s(()=>[c.notifications.length>0?(l(),_("div",qe,[t(N,{flat:"",class:"font-10 text-primary",onClick:r.markAllNotificationsAsRead},{default:s(()=>[f(" Tandai Semua Telah Dibaca ")]),_:1},8,["onClick"])])):(l(),_("div",He,Qe))]),_:1}),(l(!0),_(C,null,R(c.notifications,(a,y)=>(l(),u(w,{key:y,value:a,onClick:d=>r.goToDetailNotification(a)},{prepend:s(()=>[t(h,{icon:a.Icon},null,8,["icon"])]),default:s(()=>[t(Te,{textContent:g(a.Title)},null,8,["textContent"]),t(Se,{textContent:g(a.Text)},null,8,["textContent"])]),_:2},1032,["value","onClick"]))),128)),t(xe,{class:"mt-2"}),t(w,null,{default:s(()=>[m("div",We,[t(N,{flat:"",onClick:r.goToNotificationList},{default:s(()=>[Ze]),_:1},8,["onClick"])])]),_:1})]),_:1})]),_:1}),t(N,{icon:"",onClick:r.logout},{default:s(()=>[t(h,null,{default:s(()=>[f("mdi-logout-variant")]),_:1})]),_:1},8,["onClick"])]),_:1})}const tt=D(Xe,[["render",et]]),at="baraka-ui",st="1.4.7",ot={dev:"vite",build:"vite build",preview:"vite preview",lint:"eslint . --fix --ignore-path .gitignore"},nt={"@iframe-resizer/child":"^5.3.2","@mdi/font":"7.0.96","@vueuse/motion":"^2.2.6",axios:"^1.6.0","chart.js":"^4.4.2","core-js":"^3.29.0",defu:"^6.1.4",html2canvas:"^1.4.1","html2pdf.js":"^0.10.1","iframe-resizer":"^5.3.2",jspdf:"^2.5.1","jspdf-autotable":"^3.5.28",lodash:"^4.17.21",mitt:"^3.0.1",moment:"^2.29.4","pdf-viewer-vue":"^0.2.7","roboto-fontface":"*",vue:"^3.2.0","vue-chartjs":"^5.3.1","vue-html2pdf":"^1.8.0","vue-router":"^4.0.0","vue3-youtube":"^0.1.9",vuetify:"^3.0.0","youtube-vue":"^2.0.13"},it={"@vitejs/plugin-vue":"^4.0.0",eslint:"^8.37.0","eslint-plugin-vue":"^9.3.0",sass:"^1.80.3","unplugin-fonts":"^1.0.3",vite:"^4.2.0","vite-plugin-vuetify":"^1.0.0"},lt={name:at,version:st,private:!0,scripts:ot,dependencies:nt,devDependencies:it},rt="/assets/new_register-2ef811b3.wav";const ct={data(){return{menuList:JSON.parse(localStorage.getItem("menuList"))||[],name:JSON.parse(localStorage.getItem("name")),nickname:JSON.parse(localStorage.getItem("nickname")),roleName:JSON.parse(localStorage.getItem("roleName")),profilePicture:localStorage.getItem("profilePicture")?`${JSON.parse(localStorage.getItem("profilePicture"))}`:"default.svg",totalNewStudentRegistrants:0,totalNewTutorRegistrants:0,newRegisterTone:new Audio(rt),open:[],path:this.$route.path,appVersion:lt.version}},watch:{$route(e,i){this.path=e.path,this.resetMenuList(),this.open=[],this.setExpandedMenu()}},mounted(){this.resetMenuList(),this.setExpandedMenu(),this.roleName=="superadmin"&&(this.getTotalNewRegistrants(),this.intervalId=setInterval(this.getTotalNewRegistrants,10*60*1e3)),O.on("CheckTotalNewRegistrants",this.getTotalNewRegistrants)},beforeUnmount(){O.off("CheckTotalNewRegistrants",this.getTotalNewRegistrants),this.roleName=="superadmin"&&clearInterval(this.intervalId)},beforeDestroy(){this.roleName=="superadmin"&&clearInterval(this.intervalId)},methods:{resetMenuList(){this.menuList=JSON.parse(localStorage.getItem("menuList"))||[]},setExpandedMenu(){this.menuList.forEach(e=>{e.submenu.forEach(i=>{if(i.path==this.path){this.open=[e.name];return}})})},redirectTo(e){e&&this.$router.push(e)},async getTotalNewRegistrants(){await this.getTotalNewStudentRegistrants(),await this.getTotalNewTutorRegistrants()},async getTotalNewStudentRegistrants(){try{const e=await Ce.getTotalNewRegistrants();e.data.TotalNewRegistrants>this.totalNewStudentRegistrants,this.totalNewStudentRegistrants=e.data.TotalNewRegistrants}catch(e){this.$root.showSnackbar(e.response?e.response.data.message:e.message)}},async getTotalNewTutorRegistrants(){try{const e=await Re.getTotalNewRegistrants();e.data.TotalNewRegistrants>this.totalNewStudentRegistrants,this.totalNewTutorRegistrants=e.data.TotalNewRegistrants}catch(e){this.$root.showSnackbar(e.response?e.response.data.message:e.message)}}}},G=e=>(Be("data-v-bfe101b6"),e=e(),Ie(),e),ut={class:"d-flex ml-4 ma-6"},dt={class:"mr-1"},ft={class:"d-block font-italic",style:{"font-size":"12px"}},gt=G(()=>m("hr",{class:"ml-4 mr-4 mt-6",style:{"border-top":"2px solid gray"}},null,-1)),mt=G(()=>m("hr",{class:"ml-4 mr-4",style:{"border-top":"1px solid gray"}},null,-1)),ht={class:"my-4"},_t={class:"text-center text-caption"};function vt(e,i,n,c,o,r){return l(),_("div",null,[m("div",ut,[m("div",dt,[t(h,{size:"40",color:"primary"},{default:s(()=>[f(" mdi-account ")]),_:1})]),m("div",null,[m("h4",null,g(o.name),1),m("span",ft,g(o.roleName=="student"?"siswa":o.roleName),1)])]),gt,mt,t(Y,{opened:o.open,"onUpdate:opened":i[0]||(i[0]=a=>o.open=a)},{default:s(()=>[(l(!0),_(C,null,R(o.menuList,(a,y)=>(l(),_("div",{key:y},[a.submenu&&a.submenu.length>0?(l(),u(Le,{key:0,value:a.name},{activator:s(({props:d})=>[t(w,b(d,{rounded:"lg",class:["menu",{active:a.path==o.path}],onClick:T=>r.redirectTo(a.path)}),{default:s(()=>[t(h,{class:p(["icon",{active:a.path==o.path}])},{default:s(()=>[f(g(a.icon),1)]),_:2},1032,["class"]),f(" "+g(a.name),1)]),_:2},1040,["class","onClick"])]),default:s(()=>[(l(!0),_(C,null,R(a.submenu,(d,T)=>(l(),u(w,{key:T,rounded:"lg",class:p(["submenu",{active:d.path==o.path}]),value:d.name,onClick:v=>r.redirectTo(d.path)},{default:s(()=>[t(h,{class:p(["icon",{active:d.path==o.path}])},{default:s(()=>[f(g(d.icon),1)]),_:2},1032,["class"]),f(" "+g(d.name),1)]),_:2},1032,["value","class","onClick"]))),128))]),_:2},1032,["value"])):(l(),u(w,{key:1,rounded:"lg",class:p(["menu",{active:a.path==o.path}]),onClick:d=>r.redirectTo(a.path)},{default:s(()=>[a.name=="Siswa"&&o.totalNewStudentRegistrants>0?(l(),u(L,{key:0,color:"#d82c2c","offset-x":"5",content:o.totalNewStudentRegistrants},{default:s(()=>[t(h,{class:p(["icon",{active:a.path==o.path}])},{default:s(()=>[f(g(a.icon),1)]),_:2},1032,["class"])]),_:2},1032,["content"])):a.name=="Tutor"&&o.totalNewTutorRegistrants>0?(l(),u(L,{key:1,color:"#d82c2c","offset-x":"5",content:o.totalNewTutorRegistrants},{default:s(()=>[t(h,{class:p(["icon",{active:a.path==o.path}])},{default:s(()=>[f(g(a.icon),1)]),_:2},1032,["class"])]),_:2},1032,["content"])):(l(),u(h,{key:2,class:p(["icon",{active:a.path==o.path}])},{default:s(()=>[f(g(a.icon),1)]),_:2},1032,["class"])),f(" "+g(a.name),1)]),_:2},1032,["class","onClick"]))]))),128))]),_:1},8,["opened"]),m("div",ht,[m("p",_t,"version "+g(o.appVersion),1)])])}const F=D(ct,[["render",vt],["__scopeId","data-v-bfe101b6"]]);const pt={__name:"BrkLoading",setup(e){const{smAndDown:i}=A();return(n,c)=>(l(),_("div",{class:"wrapper",style:Ae(k(i)?"left:0":"left:220px !important")},[t(De,{indeterminate:"",color:"secondary",size:120})],4))}},yt=D(pt,[["__scopeId","data-v-aaa29023"]]);const kt=B({scrollable:Boolean,...I(),...X({tag:"main"})},"VMain"),wt=x()({name:"VMain",props:kt(),setup(e,i){let{slots:n}=i;const{mainStyles:c}=Pe(),{ssrBootStyles:o}=Me();return V(()=>t(e.tag,{class:["v-main",{"v-main--scrollable":e.scrollable},e.class],style:[c.value,o.value,e.style]},{default:()=>{var r,a;return[e.scrollable?t("div",{class:"v-main__scroller"},[(r=n.default)==null?void 0:r.call(n)]):(a=n.default)==null?void 0:a.call(n)]}})),{}}}),bt={__name:"View",setup(e){const{smAndDown:i}=A(),n=ref(!1),c=o=>{n.value=o};return(o,r)=>{const a=je("router-view");return l(),u(wt,{class:"bg-blue-lighten-5"},{default:s(()=>[t($e,{class:p(k(i)?"ma-2 pa-6":"ma-6 pa-6")},{default:s(()=>[t(a,{onIsLoading:c})]),_:1},8,["class"]),k(n)?(l(),u(yt,{key:0})):S("",!0)]),_:1})}}};const Nt=B({...I(),...Ee()},"VLayout"),Tt=x()({name:"VLayout",props:Nt(),setup(e,i){let{slots:n}=i;const{layoutClasses:c,layoutStyles:o,getLayoutItem:r,items:a,layoutRef:y}=ze(e);return V(()=>{var d;return t("div",{ref:y,class:[c.value,e.class],style:[o.value,e.style]},[(d=n.default)==null?void 0:d.call(n)])}),{getLayoutItem:r,items:a}}}),xt={__name:"Default",setup(e){const{smAndDown:i}=A(),n=ref(!1);return(c,o)=>(l(),u(Je,null,{default:s(()=>[t(Tt,{class:"rounded rounded-md"},{default:s(()=>[t(tt,{onToggleDrawer:o[0]||(o[0]=r=>n.value=!k(n)),useToggle:k(i)},null,8,["useToggle"]),k(i)?(l(),u(U,{key:0,modelValue:k(n),"onUpdate:modelValue":o[1]||(o[1]=r=>Oe(n)?n.value=r:null),width:"200",style:{position:"fixed"}},{default:s(()=>[t(F)]),_:1},8,["modelValue"])):(l(),u(U,{key:1,width:"220",style:{position:"fixed"},permanent:!0},{default:s(()=>[t(F)]),_:1})),t(bt)]),_:1})]),_:1}))}};export{xt as default};
